<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Easy Sniff</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="notifications" class="notifications-container"></div>
    <div class="header">
        <h1>Easy Sniff</h1>
        <div class="filter-container">
            <div class="filter-type">
                <label data-tooltip="XHR –∑–∞–ø—Ä–æ—Å—ã">
                    <input type="checkbox" value="xhr" checked> XHR
                </label>
                <label data-tooltip="WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è">
                    <input type="checkbox" value="websocket" checked> WebSocket
                </label>
                <label data-tooltip="–í—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Ç–∏–ø—ã –∑–∞–ø—Ä–æ—Å–æ–≤">
                    <input type="checkbox" value="other" checked> –î—Ä—É–≥–∏–µ
                </label>
            </div>
            <input type="text" id="filter" placeholder="–§–∏–ª—å—Ç—Ä –∑–∞–ø—Ä–æ—Å–æ–≤..." data-tooltip="–ü–æ–∏—Å–∫ –ø–æ URL, –º–µ—Ç–æ–¥—É –∏–ª–∏ —Å—Ç–∞—Ç—É—Å—É">
            <div class="decoders-container">
                <button id="wsDecoder" class="decoder-button">
                    <span class="decoder-icon">üîå</span>
                    –î–µ–∫–æ–¥–µ—Ä WS
                </button>
                <button id="jwtDecoder" class="decoder-button">
                    <span class="decoder-icon">üîë</span>
                    –î–µ–∫–æ–¥–µ—Ä JWT
                </button>
                <button id="curlSender" class="decoder-button">
                    <span class="decoder-icon">üöÄ</span>
                    cURL Sender
                </button>
                <button id="clearFilter" class="decoder-button" data-tooltip="–û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã (Ctrl+C)">
                    <span class="decoder-icon">üóëÔ∏è</span>
                    –û—á–∏—Å—Ç–∏—Ç—å
                </button>
            </div>
        </div>
    </div>
    <div class="stats-and-mode">
        <div class="stats">
            –í—Å–µ–≥–æ –∑–∞–ø—Ä–æ—Å–æ–≤: <span id="totalRequests">0</span> | 
            –û—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–æ: <span id="filteredRequests">0</span> | 
            –û—à–∏–±–æ–∫: <span id="errorRequests" class="error-count">0</span>
        </div>
        <div class="view-mode">
            <button id="allRequestsMode" class="mode-button active" data-tooltip="–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã">–í—Å–µ –∑–∞–ø—Ä–æ—Å—ã</button>
            <button id="errorsMode" class="mode-button" data-tooltip="–ü–æ–∫–∞–∑–∞—Ç—å —Ç–æ–ª—å–∫–æ –æ—à–∏–±–∫–∏">–û—à–∏–±–∫–∏</button>
        </div>
    </div>
    <table id="requestsTable">
        <thead>
            <tr>
                <th data-sort="duration" data-tooltip="–ù–∞–∂–º–∏—Ç–µ –¥–ª—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏">–í—Ä–µ–º—è (–º—Å)</th>
                <th data-sort="method" data-tooltip="–ù–∞–∂–º–∏—Ç–µ –¥–ª—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏">–ú–µ—Ç–æ–¥</th>
                <th data-sort="url" data-tooltip="–ù–∞–∂–º–∏—Ç–µ –¥–ª—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏">URL</th>
                <th data-sort="status" data-tooltip="–ù–∞–∂–º–∏—Ç–µ –¥–ª—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏">–°—Ç–∞—Ç—É—Å</th>
                <th data-sort="type" data-tooltip="–ù–∞–∂–º–∏—Ç–µ –¥–ª—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏">–¢–∏–ø</th>
                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
            </tr>
        </thead>
        <tbody id="requestsTableBody"></tbody>
    </table>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –¥–µ–∫–æ–¥–µ—Ä–∞ -->
    <div id="wsDecoderModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>–î–µ–∫–æ–¥–µ—Ä WebSocket —Å–æ–æ–±—â–µ–Ω–∏–π</h2>
                <span class="close" data-tooltip="–ó–∞–∫—Ä—ã—Ç—å (Esc)">&times;</span>
            </div>
            <div class="modal-body">
                <div class="decoder-container">
                    <div class="input-section">
                        <label for="encodedMessage">–ó–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ:</label>
                        <textarea id="encodedMessage" placeholder="–í—Å—Ç–∞–≤—å—Ç–µ –∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ..."></textarea>
                        <button id="decodeButton" data-tooltip="–î–µ–∫–æ–¥–∏—Ä–æ–≤–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ">
                            <span class="spinner" id="decodeSpinner"></span>
                            –î–µ–∫–æ–¥–∏—Ä–æ–≤–∞—Ç—å
                        </button>
                    </div>
                    <div class="output-section">
                        <label>–†–µ–∑—É–ª—å—Ç–∞—Ç –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è:</label>
                        <div class="output-container">
                            <button class="copy-json-button" data-tooltip="–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
                            <span class="success-indicator">–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ!</span>
                            <pre id="decodedMessage"></pre>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–µ–∫–æ–¥–µ—Ä–∞ JWT -->
    <div id="jwtDecoderModal" class="modal">
        <div class="modal-content decoder-modal">
            <div class="modal-header">
                <h2>JWT –î–µ–∫–æ–¥–µ—Ä</h2>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <div class="input-group">
                    <textarea id="jwtInput" placeholder="–í—Å—Ç–∞–≤—å—Ç–µ JWT —Ç–æ–∫–µ–Ω"></textarea>
                </div>
                <div class="decoder-controls">
                    <button id="jwtDecodeButton" class="primary-button">
                        –î–µ–∫–æ–¥–∏—Ä–æ–≤–∞—Ç—å
                        <div id="jwtDecodeSpinner" class="spinner"></div>
                    </button>
                </div>
                <div class="output-container">
                    <div class="output-section">
                        <h3>Header</h3>
                        <pre id="jwtHeader" class="output json-output"></pre>
                    </div>
                    <div class="output-section">
                        <h3>Payload</h3>
                        <div class="payload-container">
                            <button class="copy-json-button" data-target="payload">
                                –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å payload
                                <span class="success-indicator">‚úì</span>
                            </button>
                            <pre id="jwtPayload" class="output json-output"></pre>
                        </div>
                    </div>
                    <div class="output-section">
                        <h3>Signature</h3>
                        <pre id="jwtSignature" class="output"></pre>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è WebSocket —Å–æ–æ–±—â–µ–Ω–∏–π -->
    <div id="wsViewerModal" class="modal">
        <div class="modal-content ws-viewer-content">
            <div class="modal-header">
                <div class="ws-header-info">
                    <h2>WebSocket Viewer</h2>
                    <div class="ws-status">
                        <span class="ws-status-indicator"></span>
                        <span class="ws-status-text">–û—Ç–∫–ª—é—á–µ–Ω–æ</span>
                    </div>
                </div>
                <div class="ws-controls">
                    <button id="wsConnect" class="ws-control-btn">–ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è</button>
                    <button id="wsClear" class="ws-control-btn">–û—á–∏—Å—Ç–∏—Ç—å</button>
                    <button id="wsAutoDecode" class="ws-control-btn">–ê–≤—Ç–æ-–¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ</button>
                    <span class="close">&times;</span>
                </div>
            </div>
            <div class="modal-body ws-viewer-body">
                <div class="ws-messages">
                    <div class="messages-container" id="wsMessages"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ XHR –∑–∞–ø—Ä–æ—Å–∞ -->
    <div id="requestViewerModal" class="modal">
        <div class="modal-content request-viewer-content">
            <div class="modal-header">
                <h2>–ü—Ä–æ—Å–º–æ—Ç—Ä –∑–∞–ø—Ä–æ—Å–∞</h2>
                <div class="request-controls">
                    <button id="copyAsCurl" class="request-control-btn" data-tooltip="–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∫ cURL">
                        <span class="request-icon">üìã</span>
                        cURL
                    </button>
                    <span class="close">&times;</span>
                </div>
            </div>
            <div class="modal-body request-viewer-body">
                <div class="request-tabs">
                    <button class="tab-button active" data-tab="general">General</button>
                    <button class="tab-button" data-tab="headers">Headers</button>
                    <button class="tab-button" data-tab="request">Request</button>
                    <button class="tab-button" data-tab="response">Response</button>
                    <button class="tab-button" data-tab="timing">Timing</button>
                </div>
                <div class="tab-content">
                    <!-- General -->
                    <div class="tab-pane active" id="general">
                        <div class="info-grid">
                            <div class="info-row">
                                <div class="info-label">Method:</div>
                                <div class="info-value" id="reqMethod"></div>
                            </div>
                            <div class="info-row">
                                <div class="info-label">URL:</div>
                                <div class="info-value" id="reqUrl"></div>
                            </div>
                            <div class="info-row">
                                <div class="info-label">Status:</div>
                                <div class="info-value" id="reqStatus"></div>
                            </div>
                            <div class="info-row">
                                <div class="info-label">Type:</div>
                                <div class="info-value" id="reqType"></div>
                            </div>
                            <div class="info-row">
                                <div class="info-label">Time:</div>
                                <div class="info-value" id="reqTime"></div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Headers -->
                    <div class="tab-pane" id="headers">
                        <div class="headers-section">
                            <div class="section-header">
                                <h3>Request Headers</h3>
                                <button class="copy-button" data-target="requestHeaders">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
                            </div>
                            <pre id="requestHeaders" class="headers-content"></pre>
                        </div>
                        <div class="headers-section">
                            <div class="section-header">
                                <h3>Response Headers</h3>
                                <button class="copy-button" data-target="responseHeaders">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
                            </div>
                            <pre id="responseHeaders" class="headers-content"></pre>
                        </div>
                        <div class="headers-section">
                            <div class="section-header">
                                <h3>Query Parameters</h3>
                                <button class="copy-button" data-target="queryParams">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
                            </div>
                            <pre id="queryParams" class="headers-content"></pre>
                        </div>
                    </div>
                    
                    <!-- Request -->
                    <div class="tab-pane" id="request">
                        <div class="section-header">
                            <h3>Request Body</h3>
                            <button class="copy-button" data-target="requestBody">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
                        </div>
                        <pre id="requestBody" class="request-content"></pre>
                    </div>
                    
                    <!-- Response -->
                    <div class="tab-pane" id="response">
                        <div class="section-header">
                            <h3>Response Body</h3>
                            <button class="copy-button" data-target="responseBody">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
                        </div>
                        <pre id="responseBody" class="response-content"></pre>
                    </div>
                    
                    <!-- Timing -->
                    <div class="tab-pane" id="timing">
                        <div class="timing-container">
                            <div class="timing-bar">
                                <div class="timing-phase" id="requestTime"></div>
                                <div class="timing-phase" id="responseTime"></div>
                            </div>
                            <div class="timing-labels">
                                <div class="timing-label">–ó–∞–ø—Ä–æ—Å –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω</div>
                                <div class="timing-label">–û—Ç–≤–µ—Ç –ø–æ–ª—É—á–µ–Ω</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å cURL -->
    <div id="curlSenderModal" class="modal">
        <div class="modal-content curl-sender-content">
            <div class="modal-header">
                <h2>cURL Sender</h2>
                <div class="curl-controls">
                    <button id="clearCurl" class="request-control-btn" data-tooltip="–û—á–∏—Å—Ç–∏—Ç—å –≤—Å—ë">
                        <span class="request-icon">üóëÔ∏è</span>
                        –û—á–∏—Å—Ç–∏—Ç—å
                    </button>
                    <span class="close">&times;</span>
                </div>
            </div>
            <div class="modal-body curl-sender-body">
                <div class="curl-input-section">
                    <textarea id="curlInput" placeholder="–í—Å—Ç–∞–≤—å—Ç–µ cURL –∑–∞–ø—Ä–æ—Å..."></textarea>
                    <div class="curl-actions">
                        <button id="parseCurlButton" class="primary-button">
                            <span class="request-icon">üëÅÔ∏è</span>
                            –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å
                        </button>
                    </div>
                </div>
                
                <div class="parsed-curl-section">
                    <div class="parsed-curl-header">
                        <h3>–†–∞—Å–ø–∞—Ä—Å–µ–Ω–Ω—ã–π –∑–∞–ø—Ä–æ—Å</h3>
                        <div class="request-info">
                            <span id="requestMethodBadge" class="method-badge"></span>
                            <span id="requestUrlDisplay" class="url-display"></span>
                        </div>
                    </div>

                    <div class="curl-editor">
                        <div class="editor-section">
                            <div class="editor-header">
                                <h4>–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:</h4>
                                <button id="beautifyJson" class="primary-button">
                                    <span class="request-icon">‚ú®</span>
                                    Beauty
                                </button>
                            </div>
                            <textarea id="requestBodyEditor" class="json-editor" placeholder="–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON"></textarea>
                        </div>
                    </div>

                    <div class="curl-actions">
                        <button id="sendCurlRequest" class="primary-button">
                            <span class="request-icon">üì§</span>
                            –û—Ç–ø—Ä–∞–≤–∏—Ç—å
                            <div class="spinner" id="sendSpinner"></div>
                        </button>
                    </div>
                </div>

                <div class="response-section">
                    <div class="response-header">
                        <h3>–û—Ç–≤–µ—Ç</h3>
                        <div class="response-info">
                            <span id="responseStatus"></span>
                            <span id="responseTime"></span>
                        </div>
                    </div>
                    <pre id="responseBody" class="response-body json-output"></pre>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>